<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .section-publications {
            padding: 20px;
        }

        .filters {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .publications-list {
            list-style: none;
            padding: 0;
        }

        .publication-item {
            display: flex;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            background-color: #f9f9f9;
        }

        .publication-item .year {
            width: 50px;
            text-align: center;
            font-weight: bold;
            color: #fff;
            background-color: #000000;
            padding: 10px;
        }

        .publication-item .details {
            margin-left: 20px;
        }

        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            font-family: "Roboto";
        }

        .pagination button {
            margin: 0 10px;
            padding: 10px 10px;
            background-color: #000000;
            color: #fff;
            font-family: "Roboto";
        }
    </style>
</head>
<body>
  <section>
    <!-- YouTube Carousel -->
<div id="YouTube-carousel-desktop">
  <div class="youtube-slider-mask">
    <div class="youtube-slider">
      <div id="slide-stack">
        <!-- Video Slide 1 -->
        <div class="video-slide-item" id="video-slide-item-0">
          <iframe id="video-0" class="video" width="100%" height="315" src="https://www.youtube.com/embed/Video1?enablejsapi=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
        <div class="video-slide-item" id="video-slide-item-1">
          <iframe id="video-1" class="video" width="100%" height="315" src="https://www.youtube.com/embed/Video2?enablejsapi=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
        <div class="video-slide-item" id="video-slide-item-2">
          <iframe id="video-2" class="video" width="100%" height="315" src="https://www.youtube.com/embed/Video3?enablejsapi=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>

        <!-- Next Slider -->
        <div class="video-slide-item" id="video-slide-item-3">
          <iframe id="video-3" class="video" width="100%" height="315" src="https://www.youtube.com/embed/Video4?enablejsapi=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
        <div class="video-slide-item" id="video-slide-item-4">
          <iframe id="video-4" class="video" width="100%" height="315" src="https://www.youtube.com/embed/Video5?enablejsapi=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
        <div class="video-slide-item" id="video-slide-item-5">
          <iframe id="video-5" class="video" width="100%" height="315" src="https://www.youtube.com/embed/Video6?enablejsapi=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>

      </div>
    </div>
    
    <!-- Navigation Arrows -->
    <div class="left-arrow">Left</div>
    <div class="right-arrow">Right</div>
  </div>
</div>

<!-- Overlay for Playing Videos in Larger Size -->
<div id="video-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.9); z-index: 9999;">
  <div id="overlay-close" style="position: absolute; top: 20px; right: 20px; color: white; cursor: pointer;">&times; Close</div>
</div>

<style>
#video-overlay iframe {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 80%;
  height: 80%;
}

#overlay-close {
  font-size: 2rem;
  color: white;
  cursor: pointer;
}
</style>

<!-- Include the YouTube IFrame API -->
<script src="https://www.youtube.com/iframe_api"></script>

<script>
  // YouTube player variables

  let players = [];
  let allVideos;
  let currentPlayer = null;

  
  const videoIDs = ['Video1', 'Video2', 'Video3', 'Video4', 'Video5', 'Video6'];  // Replace these with actual video IDs

  function pauseVideo(element) {
    let iframe = element.querySelector('iframe');
    let video = element.querySelector('video');

    if (iframe) {
      let iframeSrc = iframe.src;
      iframe.src = iframeSrc;

    }
    if (video) {
      video.pause();
    }

  } 
  // Initialize YouTube IFrame API for each iframe video
  function onYouTubeIframeAPIReady() {
    allVideos = $('.video-slide-item iframe');  // Target all the iframe videos

    allVideos.each(function(index) {
      // Initialize YouTube Player for each video
      players[index] = new YT.Player($(this).attr('id'), {
        events: {
          'onStateChange': onPlayerStateChange
        }
      });

      // Save the YouTube player instance in the data attribute
      $(this).data('player', players[index]);
    });
  }

  // Function to handle state change (pause other videos if one starts playing)
  function onPlayerStateChange(event) {
    if (event.data === YT.PlayerState.PLAYING) {
      if (currentPlayer && currentPlayer !== event.target) {
        currentPlayer.pauseVideo();  // Pause the currently playing video
      }
      currentPlayer = event.target;
    }
  }

  // Handle click on video containers to open overlay and play/pause videos
  $(document).ready(function() {
    $('.video-slide-item').click(function () {
      const clickedPlayer = $(this).find('iframe').data('player');  // Get the YouTube player object for the clicked video

      // Pause all other videos
      allVideos.each(function () {
        let otherPlayer = $(this).data('player');
        if (otherPlayer !== clickedPlayer) {
          otherPlayer.pauseVideo();
        }
      });

      // Play or pause the clicked video
      if (clickedPlayer.getPlayerState() === YT.PlayerState.PLAYING) {
        clickedPlayer.pauseVideo();
      } else {
        clickedPlayer.playVideo();
      }
    });
  });

  // Function to open video in an overlay
  function openOverlay(videoId) {
    $('#video-overlay').show().html(`
      <iframe width="100%" height="100%" src="https://www.youtube.com/embed/${videoId}?autoplay=1" frameborder="0" allowfullscreen></iframe>
    `);
  }

  // Close overlay when clicking the close button
  $('#overlay-close').click(function () {
    $('#video-overlay').hide().empty();
  });
</script>

  </section>
    <section class="section-publications">
        <div class="filters">
            <select id="filter-keyword">
                <option value="">Filter by keyword</option>
                <!-- Populate options dynamically -->
            </select>
            <select id="filter-author">
                <option value="">Filter by author</option>
                <!-- Populate options dynamically -->
            </select>
            <div class="show-options">
                Show:
                <input type="radio" name="show" value="10" checked> 10
                <input type="radio" name="show" value="20"> 20
                <input type="radio" name="show" value="all"> All
            </div>
            <div class="publication-count">
                Publications: <span id="publication-count">0</span>
            </div>
        </div>
        <ol role="list" class="publications-list"></ol>
        <div class="pagination">
            <button id="prev-page">Prev</button>
            <span id="page-info">Page 1 of 1</span>
            <button id="next-page">Next</button>
        </div>
    </section>

    <script>
        let publications = [];
        let currentPage = 1;
        let itemsPerPage = 10;

        const publicationList = document.querySelector('.publications-list');
        const filterKeyword = document.getElementById('filter-keyword');
        const filterAuthor = document.getElementById('filter-author');
        const publicationCount = document.getElementById('publication-count');
        const pageInfo = document.getElementById('page-info');

        fetch('https://raw.githubusercontent.com/nurgultekin/publications/main/publications.json')
          .then(response => response.json())
          .then(data => {
            publications = data.publications; // Assign data to the publications array
            console.log(publications); // Check if data is being fetched
            populateFilters();
            renderPublications();
            updateCount();
            updatePageInfo();
          })
          .catch(error => {
            console.error('Error fetching the JSON data:', error);
          });

        function populateFilters() {
          const keywords = [...new Set(publications.flatMap(pub => pub.keywords))];
          const authors = [...new Set(publications.flatMap(pub => pub.authors))];
          
          filterKeyword.innerHTML = '<option value="">Filter by keyword</option>'; // Reset options
          filterAuthor.innerHTML = '<option value="">Filter by author</option>'; // Reset options

          keywords.forEach(keyword => {
            const option = document.createElement('option');
            option.value = keyword;
            option.textContent = keyword;
            filterKeyword.appendChild(option);
          });

          authors.forEach(author => {
            const option = document.createElement('option');
            option.value = author;
            option.textContent = author;
            filterAuthor.appendChild(option);
          });
        }

        function renderPublications() {
          publicationList.innerHTML = '';

          const filteredPublications = filterPublications();
          const paginatedPublications = paginatePublications(filteredPublications);

          paginatedPublications.forEach(pub => {
            const listItem = document.createElement('li');
            listItem.innerHTML = `
              <div class="publication-item">
                <div class="year">${pub.year}</div>
                <div class="details">
                  <h4>${pub.title}</h4>
                  <p>${pub.authors.join(', ')}</p>
                  <p>${pub.journal}</p>
                  <p>${pub.keywords.join(', ')}</p>
                </div>
              </div>
            `;
            publicationList.appendChild(listItem);
          });
          updatePageInfo();
        }

        function filterPublications() {
          const keyword = filterKeyword.value;
          const author = filterAuthor.value;

          return publications.filter(pub => {
            return (!keyword || pub.keywords.includes(keyword)) && 
                   (!author || pub.authors.includes(author));
          });
        }

        function paginatePublications(items) {
          const startIndex = (currentPage - 1) * itemsPerPage;
          return items.slice(startIndex, startIndex + itemsPerPage);
        }

        function updateCount() {
          publicationCount.textContent = filterPublications().length;
        }

        function updatePageInfo() {
          const totalPages = Math.ceil(filterPublications().length / itemsPerPage);
          pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
        }

        filterKeyword.addEventListener('change', () => {
          currentPage = 1;
          renderPublications();
          updateCount();
        });

        filterAuthor.addEventListener('change', () => {
          currentPage = 1;
          renderPublications();
          updateCount();
        });

        document.querySelector('.show-options').addEventListener('change', (e) => {
          itemsPerPage = e.target.value === 'all' ? publications.length : parseInt(e.target.value);
          currentPage = 1;
          renderPublications();
          updateCount();
        });

        document.getElementById('prev-page').addEventListener('click', () => {
          if (currentPage > 1) {
            currentPage--;
            renderPublications();
            updatePageInfo();
          }
        });

        document.getElementById('next-page').addEventListener('click', () => {
          const totalPages = Math.ceil(filterPublications().length / itemsPerPage);
          if (currentPage < totalPages) {
            currentPage++;
            renderPublications();
            updatePageInfo();
          }
        });
    </script>
</body>
</html>
